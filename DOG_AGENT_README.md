# 🐕 狗狗智能体使用说明

## 简介

这是一个数字狗狗生命模拟系统，包含两个版本：
1. **命令行版本** (`dog_agent.py`) - 纯终端交互
2. **Gradio 网页版本** (`dog_agent_gradio.py`) - 网页界面，推荐使用 ✨

## 功能特性

### 🎮 两种模式
- **交互模式**: 通过输入指令与狗狗互动
- **自主模式**: 狗狗根据内部状态自主行动（15秒无互动自动触发）

### 🐾 32种行为
- **生理类**: 伸懒腰、打哈欠、喝水、吃饭、舔毛、睡觉
- **社交类**: 摇尾巴、蹭主人、舔手、跟随、抬头看主人
- **探索类**: 嗅地板、绕圈、扒东西、看窗外、追光点
- **情绪类**: 吠叫、低吼、耳朵夹起、尾巴夹起、原地蹦跳
- **训练类**: 坐下、趴下、握手、打滚、装死、取物
- **特殊类**: 抓痒、打喷嚏、抖毛、打呼、做梦抽搐

### 📊 内部状态系统
- **饥饿值**: 随时间增加，吃饭减少
- **口渴值**: 随时间增加，喝水减少
- **疲劳值**: 随时间增加，睡觉/休息减少
- **无聊值**: 随时间增加，玩耍/探索减少
- **快乐值**: 受互动和需求满足影响

### 💾 持久化
- 狗狗状态保存在 SQLite 数据库
- 对话历史记忆
- 重启后状态继续

## 快速开始

### 1. 安装依赖

```bash
uv sync
```

### 2. 配置环境变量

在项目根目录创建 `.env` 文件：

```bash
DEEPSEEK_API_KEY=your_api_key_here
```

### 3. 运行 Gradio 版本（推荐）

```bash
uv run python dog_agent_gradio.py
```

浏览器访问：http://localhost:7860

### 4. 运行命令行版本

```bash
uv run python dog_agent.py
```

## 使用示例

### 交互指令示例
```
"过来"          → 狗狗会抬头、摇尾巴、跟过来
"坐下"          → 狗狗会坐下
"好狗狗"        → 狗狗会摇尾巴、舔手、跳跃
"去捡球"        → 狗狗会兴奋跳跃、去取物
"摸摸你"        → 狗狗会蹭你、舔手
"睡觉吧"        → 狗狗会蜷缩睡觉
"我们玩吧"      → 狗狗会跳跃、追光点
```

### 自主行为触发
- 饥饿值 > 70：自动去吃饭
- 口渴值 > 70：自动去喝水
- 疲劳值 > 80：自动去睡觉
- 无聊值 > 70：自动探索玩耍
- 否则：做些日常行为（伸懒腰、打哈欠等）

## 日志输出

所有版本都会在命令行输出详细日志：

```
[INIT] Initializing Dog Agent...
[USER INPUT] 过来
[INTERACTIVE] Responding to owner: 过来
[PROMPT] 当前内部状态...
  🐾 用大眼睛抬头看着主人...等待关注！
  🐾 尾巴兴奋地摇摆！好开心！
  🐾 紧紧跟随主人...待在主人身边！
[OUTPUT] (狗狗的回应)
```

## 文件说明

- `dog_agent.py` - 命令行版本主程序
- `dog_agent_gradio.py` - Gradio 网页版本主程序
- `dog_state.py` - 状态管理系统
- `dog_behaviors.py` - 32种行为定义
- `dog_state.db` - 状态持久化数据库
- `dog_session.db` / `dog_session_gradio.db` - 会话历史数据库

## 技术架构

- **AI框架**: OpenAI Agents SDK
- **LLM模型**: DeepSeek Chat (可配置)
- **状态管理**: SQLite
- **UI框架**: Gradio (网页版)
- **异步处理**: asyncio

## 注意事项

1. 需要有效的 DeepSeek API Key
2. 自主模式会在后台持续运行
3. 状态会实时更新并持久化
4. Gradio 版本默认监听 0.0.0.0:7860

## 故障排除

### 无法连接 API
- 检查 `.env` 文件中的 API Key 是否正确
- 确认网络连接正常

### 自主模式不触发
- 确认已经超过15秒无互动
- 查看命令行日志确认后台任务运行

### 状态显示异常
- 尝试删除 `dog_state.db` 重新开始
- 点击"刷新状态"按钮更新显示

## 扩展开发

可以通过修改以下文件来扩展功能：

1. `dog_behaviors.py` - 添加新的行为
2. `dog_state.py` - 修改状态规则
3. `dog_agent_gradio.py` - 调整UI和交互逻辑

祝你和虚拟狗狗玩得开心！🐕✨

